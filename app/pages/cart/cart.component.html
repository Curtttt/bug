<h4 class="text-center pt-4 lg-text fw-bold">GIỎ HÀNG</h4>
<div class="main">
    <div class="d-flex justify-content-center gap-4">
        <div class="d-flex justify-content-center gap-4 flex-wrap">
            <div class="vstack gap-3 flex-fill">
                <div class="wrapper">
                    <div class="order table-responsive rounded-1 border border-secondary-subtle" style="width:100%">
                        <table class="m-0">
                            <thead>
                                <tr>
                                    <th>Sản phẩm</th>
                                    <th>Giá</th>
                                    <th>Số lượng</th>
                                    <th>Tạm tính</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @for (item of cart_lst; track $index) {
                                <tr *ngIf="sl_lst[$index] != 0" class="divider">
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <div class="flex-shrink-0">
                                                <img width="80" height="80" [src]="item.images['img1']">
                                            </div>
                                            <div class="ms-1 fw-bold" style="font-size: 13px;">
                                                {{item.ProductName}}
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="vstack fw-bold" style="line-height: 35px; text-align:right">
                                            {{item.UnitPrice.toLocaleString("vi-VN")}}
                                            @if (item.OldPrice !=null){ <span class="old_price">
                                                {{item.OldPrice.toLocaleString("vi-VN")}}</span>}
                                        </div>

                                    </td>
                                    <td>
                                        <div
                                            class="d-flex rounded-pill border border-secondary-subtle justify-content-between align-items-center" style="height: 40%;">
                                            <button type="button" class="sl_btn" (click)="updateCart($index, '-')" [disabled]="sl_lst[$index] == 1">
                                                <i class="fa-solid fa-minus fa-xs ps-2" style="color: #000000;"></i>
                                            </button>
                                            <span class="mx-3">{{sl_lst[$index]}}</span>
                                            <button type="button" class="sl_btn" (click)="updateCart($index, '+')">
                                                <i class="fa-solid fa-plus fa-xs pe-2" style="color: #000000;"></i>
                                            </button>
                                        </div>
                                    </td>
                                    <td class="fw-bold">{{(sl_lst[$index] * item.UnitPrice).toLocaleString("vi-VN")}}</td>
                                    <td>
                                        <svg (click)="delete(item._id, $index)" xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                                            <path d="M12 23.5C18.0748 23.5 23 18.5748 23 12.5C23 6.42525 18.0748 1.5 12 1.5C5.92525 1.5 1 6.42525 1 12.5C1 18.5748 5.92525 23.5 12 23.5Z" stroke="#CCCCCC" stroke-miterlimit="10"/>
                                            <path d="M16 8.5L8 16.5" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M16 16.5L8 8.5" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </td>
                                </tr>}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="rounded-1 border border-secondary-subtle py-2 px-3 mb-4">
                    <div class="hstack gap-3 px-1 d-flex justify-content-center">
                        <div class="pe-0 align-middle">
                            <label for="voucher" class="me-3 p-0 fw-bold fs-5 text-nowrap">
                                Mã giảm giá
                            </label>
                        </div>
                        <div class="ps-0">
                            <div class="hstack border border-secondary-subtle rounded-pill mx-2">
                                <input type="text" class="inp" id="voucher" placeholder="Nhập voucher">
                                <button class="rounded-pill apply_btn">Áp dụng</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="vstack border border-secondary-subtle rounded-1 p-2" style="width: 320px">
                    <p class="fs-6 fw-bold">Giỏ hàng</p>
                    <table class="table total">
                        <tbody>
                            <tr>
                                <td class="text-nowrap">Tạm tính</td>
                                <td class="text-nowrap fw-semibold">{{sum.toLocaleString("vi-VN")}}</td>
                            </tr>
                            <tr>
                                <td class="text-nowrap">Phí vận chuyển</td>
                                <td class="text-nowrap fw-bold">Miễn phí</td>
                            </tr>
                            <tr>
                                <td class="text-nowrap">Thành tiền</td>
                                <td class="text-nowrap fw-bold">{{sum.toLocaleString("vi-VN")}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <button type="submit" id="checkout" (click)="checkOut()">Thanh toán</button>
                </div>
            </div>
        </div>
    </div>